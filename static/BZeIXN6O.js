import{_ as N}from"./CyhzVyVC.js";import{_ as L}from"./_PbEniVj.js";import{s as x,o as l,c as d,u as s,d as _,a as t,t as y,m as M,n as C,r as T,F as B,q as S,v as A,x as Q,y as V,b,w as k,z as P,_ as z,A as E,B as q,T as U}from"./7L-wg891.js";import{u as m,a as D}from"./DOghqgj3.js";import{_ as j}from"./CiPWUeym.js";import{_ as F}from"./DjcsrhB5.js";import{s as R,_ as H}from"./Dm2L9ecF.js";import{_ as G}from"./D1gEUE7Y.js";import{u as J}from"./Cf-SomwD.js";import"./DNNPAP6h.js";import"./aN9q5imw.js";const K={class:"bg-primary-500 absolute -right-7 -top-1 flex h-6 w-6 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full bg-red-500 text-base font-bold"},O={__name:"delBtns",setup(g){const{deleteProductsIdArray:i}=x(m()),{modalShow:a}=D();return(u,r)=>(l(),d("div",{class:C(["mb-6 flex items-center",s(i).length?"justify-between":"justify-end"])},[s(i).length?(l(),d("button",{key:0,type:"button",class:"border-primary relative border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40",onClick:r[0]||(r[0]=e=>s(a)(""))},[r[2]||(r[2]=_(" 刪除 ")),t("span",K,y(s(i).length),1)])):M("",!0),t("button",{type:"button",class:"border-primary border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40",onClick:r[1]||(r[1]=e=>s(a)("all"))}," 全部刪除 ")],2))}},W={class:"mb-5 w-full text-center"},X={class:"w-20 py-3 align-middle"},Y=["value"],Z={class:"group w-[150px] py-3 align-middle"},tt={class:"relative"},ot=["src","alt"],et={class:"bg-primary absolute left-0 top-0 rounded-br-2xl border border-solid border-red-400 px-2 text-base font-bold text-black"},st={class:"py-3 align-middle"},rt={class:"flex items-center justify-start pl-[150px] group-hover/table-line:font-bold"},nt={key:0,class:"me-2 inline-block rounded-md bg-red-600 p-1 text-sm text-white"},at={class:"relative py-3 align-middle"},lt={class:"flex items-center justify-center"},it=["onMousedown"],dt=["onMousedown"],ct={key:0,class:"absolute bottom-3 left-1/2 -translate-x-1/2"},pt=["onClick"],ut={class:"py-3 align-middle"},bt={class:"text-gray-500 line-through"},yt={class:"py-3 align-middle"},_t={__name:"table",props:{cartData:{type:Array,required:!0}},setup(g){const i=g,{deleteProductsIdArray:a}=x(m()),{updDelProdId:u}=m(),{updateProductQty:r}=m(),e=T(null),c=T(!1);function $(p,o){o.originQty||(o.originQty=o.qty),p==="+"&&o.qty?o.qty++:p==="-"&&o.qty>1&&o.qty--}function w(p,o){c.value=!0,$(p,o),e.value=setTimeout(()=>{c.value&&(e.value=R(()=>{$(p,o)},100))},800)}function f(){c.value=!1,clearTimeout(e.value),clearInterval(e.value)}function v(p){return p.originQty&&p.originQty!==p.qty}return(p,o)=>{const I=j;return l(),d("table",W,[o[7]||(o[7]=t("thead",{class:"align-middle"},[t("tr",{class:"border-primary border-b-2 border-solid text-xl font-bold"},[t("th",{scope:"col",class:"pb-2"},[t("i",{class:"bi bi-check2-square"})]),t("th",{scope:"col",class:"pb-2"},"圖片"),t("th",{scope:"col",class:"pb-2"},"名稱"),t("th",{scope:"col",class:"pb-2"},"數量"),t("th",{scope:"col",class:"pb-2"},"單價"),t("th",{scope:"col",class:"pb-2"},"小計")])],-1)),t("tbody",null,[(l(!0),d(B,null,S(i.cartData,n=>(l(),d("tr",{class:C(["border-primary hover:bg-primary/10 group/table-line border-y border-solid text-xl",s(a).includes(n.id)&&"!bg-red-400/15"]),key:n.id},[t("td",X,[A(t("input",{type:"checkbox",class:"bg-primary focus:ring-primary/50 size-5 text-red-500 ring-4 checked:text-red-500 hover:text-red-500/90 focus:outline-none",value:n.id,"onUpdate:modelValue":o[0]||(o[0]=h=>V(a)?a.value=h:null),onChange:o[1]||(o[1]=h=>s(u)(s(a)))},null,40,Y),[[Q,s(a)]])]),t("td",Z,[b(I,{to:`/productInfo/${n.product.id}`},{default:k(()=>[t("div",tt,[t("img",{src:n.product.imageUrl,class:"mx-auto block h-[100px] w-[150px] object-cover",alt:n.product.title},null,8,ot),t("span",et,y(n.product.category),1),o[2]||(o[2]=t("div",{class:"absolute inset-0 bg-black opacity-0 transition-opacity duration-300 group-hover:opacity-50"},null,-1)),o[3]||(o[3]=t("img",{class:"absolute left-1/2 top-1/2 h-[90px] -translate-x-1/2 -translate-y-1/2 object-contain opacity-0 group-hover:opacity-100",alt:"顯示產品細節",src:F},null,-1))])]),_:2},1032,["to"])]),t("td",st,[t("div",rt,[n.product.popular>2?(l(),d("span",nt," 熱門 ")):M("",!0),_(" "+y(n.product.title),1)])]),t("td",at,[t("div",lt,[t("div",null,[t("button",{type:"button",class:C(["hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",{"cursor-not-allowed bg-gray-600 text-black":n.qty<=1,"opacity-100":v(n)}]),onMousedown:h=>w("-",n),onMouseup:f,onMouseleave:f},o[4]||(o[4]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),42,it)]),t("div",null,y(n.qty),1),t("div",null,[t("button",{type:"button",class:C(["hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",{"opacity-100":v(n)}]),onMousedown:h=>w("+",n),onMouseup:f,onMouseleave:f},o[5]||(o[5]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),42,dt)])]),v(n)?(l(),d("div",ct,[t("button",{type:"button",class:"active:bg-primary/30 hover:bg-primary/25 bg-primary/20 text-primary p-1 text-sm",onClick:h=>s(r)(n)}," 確定修改 ",8,pt)])):M("",!0)]),t("td",ut,[t("span",bt,"$"+y(n.product.origin_price),1),_(" $"+y(n.product.price),1)]),t("td",yt,"$"+y(n.final_total),1),o[6]||(o[6]=t("td",{class:"py-3 align-middle"},null,-1))],2))),128))])])}}},mt={class:"flex items-center justify-end"},xt={class:"me-10 text-lg font-bold"},gt={__name:"total",setup(g){const{final_total:i}=x(m());return(a,u)=>{const r=j;return l(),d("div",mt,[t("p",xt,"總金額 $"+y(s(i))+" 元",1),b(r,{to:"/checkout",class:"bg-red-800 px-3 py-2 text-xl hover:bg-red-700/90 active:bg-red-600/80"},{default:k(()=>u[0]||(u[0]=[_("下一步")])),_:1})])}}},ft={class:"border-primary border border-b-0 border-solid p-5 text-lg"},vt={class:"font-bold text-red-600"},ht={class:"border-primary border border-t-0 border-solid p-5 pt-0 text-center"},kt={__name:"delModal",setup(g){const{isDeleteAll:i}=x(D()),{modalHide:a}=D(),{deleteProduct:u}=m();return(r,e)=>(l(),d("div",{class:"fixed -inset-20 z-[9999] flex items-center justify-center bg-black/50",onClick:e[3]||(e[3]=P((...c)=>s(a)&&s(a)(...c),["stop"]))},[t("div",{class:"bg-black",onClick:e[2]||(e[2]=P(()=>{},["stop"]))},[e[6]||(e[6]=t("header",{class:"border-primary border border-b-0 border-solid p-3"},[t("i",{class:"bi bi-exclamation-octagon-fill text-red-600"}),_(" 刪除 ")],-1)),t("main",ft,[e[4]||(e[4]=_(" 您確定要刪除 ")),t("span",vt,y(s(i)?"所有":"勾選")+"商品 ",1),e[5]||(e[5]=_(" 嗎？(此動作無法恢復) "))]),t("footer",ht,[t("button",{type:"button",class:"border-primary hover:bg-primary/20 active:bg-primary/25 me-3 inline-block border border-solid px-3 py-1",onClick:e[0]||(e[0]=(...c)=>s(a)&&s(a)(...c))}," 取消 "),t("button",{type:"button",class:"inline-block bg-red-600 px-3 py-[5.5px] text-white hover:bg-red-600/80 active:bg-red-600/85",onClick:e[1]||(e[1]=(...c)=>s(u)&&s(u)(...c))}," 刪除 ")])])]))}},$t={class:"text-center"},wt={__name:"cartEmpty",setup(g){const{category:i,search:a}=x(J());return(u,r)=>{const e=j;return l(),d("div",$t,[r[2]||(r[2]=t("h3",{class:"mb-5 text-2xl"},"購物車是空的",-1)),r[3]||(r[3]=t("p",{class:"mb-10"},"如果您在購物時發生問題，請聯絡我們。",-1)),t("div",null,[b(e,{to:"/contact",class:"border-primary hover:bg-primary/15 active:bg-primary/20 me-5 border border-solid px-3 py-2"},{default:k(()=>r[0]||(r[0]=[_("聯絡我們")])),_:1}),b(e,{to:`/products/${s(i)||"全部"}?search=${s(a)}`,class:"border-primary me-5 border border-solid bg-red-800 px-3 py-2 hover:bg-red-800/80 active:bg-red-800/90"},{default:k(()=>r[1]||(r[1]=[_("返回購物")])),_:1},8,["to"])])])}}},Ct={class:"pb-14 pt-10"},Mt={key:1,class:"mx-auto max-w-[1200px]"},Dt={__name:"carts",setup(g){const{cartData:i}=x(m()),{getCartData:a}=m(),{isDelModalShow:u}=x(D()),r=T(!1);return E(async()=>{await a(),r.value=!0}),(e,c)=>{const $=N,w=L,f=O,v=_t,p=gt,o=kt;return l(),d("main",Ct,[t("div",null,[b($,{title:"購物車"})]),s(r)?(l(),d("div",Mt,[s(i).length?(l(),d(B,{key:0},[b(G,{class:"mb-12"}),b(f),b(v,{cartData:s(i)},null,8,["cartData"]),b(p)],64)):(l(),q(wt,{key:1})),c[0]||(c[0]=t("h3",{class:"border-primary my-12 border-b border-solid pb-2 text-center text-[32px]"}," 猜你會喜歡... ",-1)),b(H),b(U,{name:"fade"},{default:k(()=>[s(u)?(l(),q(o,{key:0})):M("",!0)]),_:1})])):(l(),q(w,{key:0}))])}}},Vt=z(Dt,[["__scopeId","data-v-0c0a0372"]]);export{Vt as default};
