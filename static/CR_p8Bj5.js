import{_ as V}from"./D6CgcnPw.js";import{L as q,r as y,o as m,c as f,a as e,u as s,t as _,m as D,F as C,q as R,n as P,d as $,s as B,D as N,x as U,C as j,A as I,z as S,B as T,b as g,y as z,M as F}from"./xenmD9g2.js";import{u as L}from"./Cj8hL2_5.js";import{s as A}from"./BGaj6fSo.js";import{a as E}from"./BAHd0xdi.js";import{u as h}from"./utyXs8i1.js";import{u as M}from"./B1ORUhKT.js";import"./mZEGzokM.js";const O={class:"grid grid-cols-2 gap-x-28"},G=["src","alt","title"],H={class:"px-10 py-8"},J={class:"mb-4 flex items-center"},K={class:"bg-primary text-md inline-block rounded-md px-3 text-lg font-bold text-black"},Q={key:0,class:"text-md ms-2 inline-block rounded-md bg-red-500 px-3 text-lg font-bold text-white"},W={class:"mb-4 flex items-end"},X={class:"mb-5"},Y={class:"text-xl leading-normal"},Z={class:"mb-5 flex items-center"},tt={class:"me-2 mt-1 text-lg text-gray-400 line-through"},et={class:"ms-2 text-3xl font-black"},ot={class:"text-red-500"},st={class:"mb-5 flex"},rt={__name:"productInfo",props:{productInfoData:{type:Object,required:!0,default:()=>({})}},setup(v){const d=v,{productInfoData:n}=q(d),{addProductToCart:b}=L(),l=y(1),c=y(null),o=y(!1);function x(r){r==="+"&&l.value?l.value++:r==="-"&&l.value>1&&l.value--}function p(r){o.value=!0,x(r),c.value=setTimeout(()=>{o.value&&(c.value=A(()=>{x(r)},100))},800)}function i(){o.value=!1,clearTimeout(c.value),clearInterval(c.value)}async function u(r,t){await b({product:r,qty:t}),l.value=1}return(r,t)=>(m(),f("div",O,[e("div",null,[e("img",{src:s(n).imageUrl,class:"block h-full w-full object-cover",alt:`${s(n).title}`,title:`${s(n).title}-${s(n).description}`},null,8,G)]),e("div",null,[e("ul",H,[e("li",J,[t[4]||(t[4]=e("span",{class:"text-2xl font-bold"},"類別：",-1)),e("span",K,_(s(n).category),1),+s(n).popular==3?(m(),f("span",Q," 熱門商品 ")):D("",!0)]),e("li",W,[t[5]||(t[5]=e("span",{class:"text-2xl font-bold"},"推薦程度：",-1)),e("div",null,[(m(),f(C,null,R(3,a=>e("i",{class:P(["bi bi-heart-fill ms-2 inline-block text-xl",a<=+s(n).popular&&"text-red-500"]),key:`productInfo-heart-${a}`},null,2)),64))])]),e("li",X,[t[6]||(t[6]=e("span",{class:"text-2xl font-bold"},"產品描述：",-1)),e("p",Y,_(s(n).description),1)]),e("li",Z,[e("p",tt," 原價 "+_(s(n).origin_price)+" 元 ",1),e("p",et,[e("span",ot,_(s(n).price),1),t[7]||(t[7]=$(" 元 "))])]),e("li",st,[e("button",{type:"button",class:P(["hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",{"cursor-not-allowed bg-gray-600 text-black":s(l)<=1}]),onMousedown:t[0]||(t[0]=a=>p("-",r.item)),onMouseup:i,onMouseleave:i},t[8]||(t[8]=[e("i",{class:"bi bi-dash-lg"},null,-1)]),34),B(e("input",{type:"number",class:"border-primay w-full border border-solid bg-black text-center text-4xl focus:outline-none",min:"1",readonly:"","onUpdate:modelValue":t[1]||(t[1]=a=>U(l)?l.value=a:null)},null,512),[[N,s(l)]]),e("button",{type:"button",class:"hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",onMousedown:t[2]||(t[2]=a=>p("+",r.item)),onMouseup:i,onMouseleave:i},t[9]||(t[9]=[e("i",{class:"bi bi-plus-lg"},null,-1)]),32)]),e("li",null,[e("button",{type:"button",class:"m-auto block w-full bg-red-800 py-3 text-2xl hover:bg-red-700/90 active:bg-red-600/80",onClick:t[3]||(t[3]=j(a=>u(s(n),s(l)),["stop"]))},t[10]||(t[10]=[e("i",{class:"bi bi-cart-check-fill"},null,-1),$(" 加入購物車 ")]))])])])]))}},lt={key:0},nt={__name:"recommendProductSwiper",props:{currentProductId:{type:String,required:!1,default:""}},setup(v){const{products:d}=I(h()),{getProducts:n}=h(),b=v,l=y({delay:"0",freeMode:!0,speed:1500}),c=S(()=>!d.value.length||!b.currentProductId?[]:d.value.filter(o=>o.id!==b.currentProductId));return T(()=>{d.value.length||n()}),(o,x)=>{const p=E;return s(d).length?(m(),f("div",lt,[g(p,{slidesPerView:4,products:s(c),"max-width":1200,options:s(l)},null,8,["products","options"])])):D("",!0)}}},at={class:"pb-14 pt-10"},it={class:"mx-auto max-w-[1200px]"},ut={key:1,class:"text-primary absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-3xl font-black"},_t={__name:"index",setup(v){const{products:d,category:n,search:b}=I(h()),{productInfoData:l}=I(M()),{fetchProductInfo:c}=M(),o=z(),x=F(),p=S(()=>{var i,u;return(i=o==null?void 0:o.params)!=null&&i.productId?d.value.length?d.value.filter(r=>{var t;return r.id===((t=o==null?void 0:o.params)==null?void 0:t.productId)})[0]:(c((u=o==null?void 0:o.params)==null?void 0:u.productId),l.value):[]});return T(()=>{var i,u,r,t,a;!((i=l.value)!=null&&i.id)&&!((u=o==null?void 0:o.params)!=null&&u.productId)?x.push(`/products/${n.value||"全部"}?search=${b.value}`):!((r=l.value)!=null&&r.id)&&((t=o==null?void 0:o.params)!=null&&t.productId)&&c((a=o==null?void 0:o.params)==null?void 0:a.productId)}),(i,u)=>{var t,a,k,w;const r=V;return m(),f("main",at,[e("section",it,[(t=s(p))!=null&&t.id?(m(),f(C,{key:0},[e("div",null,[g(r,{title:((a=s(p))==null?void 0:a.title)||""},null,8,["title"])]),g(rt,{productInfoData:s(p)},null,8,["productInfoData"]),u[0]||(u[0]=e("h3",{class:"border-primary my-12 border-b border-solid pb-2 text-center text-[32px]"}," 猜你會喜歡... ",-1)),g(nt,{currentProductId:(w=(k=s(o))==null?void 0:k.params)==null?void 0:w.productId},null,8,["currentProductId"])],64)):(m(),f("div",ut," 讀取中... "))])])}}};export{_t as default};
