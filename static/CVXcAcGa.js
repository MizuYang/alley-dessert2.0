import{_ as S}from"./B4uwP5By.js";import{L as V,r as y,o as m,c as f,a as e,u as s,t as _,z as M,F as C,m as q,y as $,d as P,n as R,D as B,q as N,C as j,A as I,x as D,B as T,b as g,s as z,M as F}from"./DzEqZT4c.js";import{u as L}from"./D5KpKDA7.js";import{a as U}from"./BP08loWa.js";import{u as w}from"./CA2Nd7Ci.js";import{u as h}from"./CvX4TOKO.js";import"./CvI2PKHU.js";import"./CG-kE7Um.js";const A=window.setInterval,E={class:"grid grid-cols-2 gap-x-28"},O=["src","alt","title"],G={class:"px-10 py-8"},H={class:"mb-4 flex items-center"},J={class:"bg-primary text-md inline-block rounded-md px-3 text-lg font-bold text-black"},K={key:0,class:"text-md ms-2 inline-block rounded-md bg-red-500 px-3 text-lg font-bold text-white"},Q={class:"mb-4 flex items-end"},W={class:"mb-5"},X={class:"text-xl leading-normal"},Y={class:"mb-5 flex items-center"},Z={class:"me-2 mt-1 text-lg text-gray-400 line-through"},tt={class:"ms-2 text-3xl font-black"},et={class:"text-red-500"},ot={class:"mb-5 flex"},st={__name:"productInfo",props:{productInfoData:{type:Object,required:!0,default:()=>({})}},setup(v){const d=v,{productInfoData:r}=V(d),{addProductToCart:b}=L(),l=y(1),i=y(!1);let o=null;async function x(n){i.value=!0,c(n),await new Promise(t=>setTimeout(t,500)),o=A(()=>{p(),c(n)},50)}function p(){if(!i.value){clearTimeout(o),o=null;return}}function c(n){i.value&&(n==="+"?l.value++:n==="-"&&l.value>1&&l.value--)}async function u(n,t){await b({product:n,qty:t}),l.value=1}return(n,t)=>(m(),f("div",E,[e("div",null,[e("img",{src:s(r).imageUrl,class:"block h-full w-full object-cover",alt:`${s(r).title}`,title:`${s(r).title}-${s(r).description}`},null,8,O)]),e("div",null,[e("ul",G,[e("li",H,[t[6]||(t[6]=e("span",{class:"text-2xl font-bold"},"類別：",-1)),e("span",J,_(s(r).category),1),+s(r).popular==3?(m(),f("span",K," 熱門商品 ")):M("",!0)]),e("li",Q,[t[7]||(t[7]=e("span",{class:"text-2xl font-bold"},"推薦程度：",-1)),e("div",null,[(m(),f(C,null,q(3,a=>e("i",{class:$(["bi bi-heart-fill ms-2 inline-block text-xl",a<=+s(r).popular&&"text-red-500"]),key:`productInfo-heart-${a}`},null,2)),64))])]),e("li",W,[t[8]||(t[8]=e("span",{class:"text-2xl font-bold"},"產品描述：",-1)),e("p",X,_(s(r).description),1)]),e("li",Y,[e("p",Z," 原價 "+_(s(r).origin_price)+" 元 ",1),e("p",tt,[e("span",et,_(s(r).price),1),t[9]||(t[9]=P(" 元 "))])]),e("li",ot,[e("button",{type:"button",class:$(["hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",{"cursor-not-allowed bg-gray-600 text-black":s(l)<=1}]),onMousedown:t[0]||(t[0]=a=>x("-")),onMouseup:t[1]||(t[1]=a=>i.value=!1)},t[10]||(t[10]=[e("i",{class:"bi bi-dash-lg"},null,-1)]),34),R(e("input",{type:"number",class:"border-primay w-full border border-solid bg-black text-center text-4xl focus:outline-none",min:"1",readonly:"","onUpdate:modelValue":t[2]||(t[2]=a=>N(l)?l.value=a:null)},null,512),[[B,s(l)]]),e("button",{type:"button",class:"hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",onMousedown:t[3]||(t[3]=a=>x("+")),onMouseup:t[4]||(t[4]=a=>i.value=!1)},t[11]||(t[11]=[e("i",{class:"bi bi-plus-lg"},null,-1)]),32)]),e("li",null,[e("button",{type:"button",class:"m-auto block w-full bg-red-800 py-3 text-2xl hover:bg-red-700/90 active:bg-red-600/80",onClick:t[5]||(t[5]=j(a=>u(s(r),s(l)),["stop"]))},t[12]||(t[12]=[e("i",{class:"bi bi-cart-check-fill"},null,-1),P(" 加入購物車 ")]))])])])]))}},rt={key:0},lt={__name:"recommendProductSwiper",props:{currentProductId:{type:String,required:!1,default:""}},setup(v){const{products:d}=I(w()),{getProducts:r}=w(),b=v,l=y({delay:"0",freeMode:!0,speed:1500}),i=D(()=>!d.value.length||!b.currentProductId?[]:d.value.filter(o=>o.id!==b.currentProductId));return T(()=>{d.value.length||r()}),(o,x)=>{const p=U;return s(d).length?(m(),f("div",rt,[g(p,{slidesPerView:4,products:s(i),"max-width":1200,options:s(l)},null,8,["products","options"])])):M("",!0)}}},nt={class:"pb-14 pt-10"},at={class:"mx-auto max-w-[1200px]"},it={key:1,class:"text-primary absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-3xl font-black"},vt={__name:"index",setup(v){const{products:d,category:r,search:b}=I(w()),{productInfoData:l}=I(h()),{fetchProductInfo:i}=h(),o=z(),x=F(),p=D(()=>{var c,u;return(c=o==null?void 0:o.params)!=null&&c.productId?d.value.length?d.value.filter(n=>{var t;return n.id===((t=o==null?void 0:o.params)==null?void 0:t.productId)})[0]:(i((u=o==null?void 0:o.params)==null?void 0:u.productId),l.value):[]});return T(()=>{var c,u,n,t,a;!((c=l.value)!=null&&c.id)&&!((u=o==null?void 0:o.params)!=null&&u.productId)?x.push(`/products/${r.value||"全部"}?search=${b.value}`):!((n=l.value)!=null&&n.id)&&((t=o==null?void 0:o.params)!=null&&t.productId)&&i((a=o==null?void 0:o.params)==null?void 0:a.productId)}),(c,u)=>{var t,a,k;const n=S;return m(),f("main",nt,[e("section",at,[s(p).id?(m(),f(C,{key:0},[e("div",null,[g(n,{title:((t=s(p))==null?void 0:t.title)||""},null,8,["title"])]),g(st,{productInfoData:s(p)},null,8,["productInfoData"]),u[0]||(u[0]=e("h3",{class:"border-primary my-12 border-b border-solid pb-2 text-center text-[32px]"}," 猜你會喜歡... ",-1)),g(lt,{currentProductId:(k=(a=s(o))==null?void 0:a.params)==null?void 0:k.productId},null,8,["currentProductId"])],64)):(m(),f("div",it," 讀取中... "))])])}}};export{vt as default};
