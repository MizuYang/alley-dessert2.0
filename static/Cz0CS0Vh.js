import{_ as N}from"./Bzrt2rfd.js";import{_ as L}from"./y0cDiYnp.js";import{s as x,o as l,c as i,u as r,d as _,a as t,t as y,m as M,n as C,r as T,F as B,q as Q,v as S,x as A,y as V,b,w as k,z as P,_ as z,A as E,B as q,T as U}from"./CsCRyp1z.js";import{u as m,a as D}from"./ChcSmFmS.js";import{_ as j}from"./CSpRQmtO.js";import{_ as F}from"./7rBQ37ww.js";import{s as R,_ as H}from"./DtZr7ubC.js";import{_ as G}from"./BVzota8j.js";import{u as J}from"./D2vZSWhm.js";import"./Dt-0W8ny.js";import"./DyjX8Jjy.js";const K={class:"bg-primary-500 absolute -right-7 -top-1 flex h-6 w-6 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full bg-red-500 text-base font-bold"},O={__name:"delBtns",setup(g){const{deleteProductsIdArray:d}=x(m()),{modalShow:a}=D();return(u,n)=>(l(),i("div",{class:C(["mb-6 flex items-center",r(d).length?"justify-between":"justify-end"])},[r(d).length?(l(),i("button",{key:0,type:"button",class:"border-primary relative border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40",onClick:n[0]||(n[0]=s=>r(a)(""))},[n[2]||(n[2]=_(" 刪除 ")),t("span",K,y(r(d).length),1)])):M("",!0),t("button",{type:"button",class:"border-primary border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40",onClick:n[1]||(n[1]=s=>r(a)("all"))}," 全部刪除 ")],2))}},W={class:"mb-5 w-full text-center"},X={class:"w-20 py-3 align-middle"},Y=["value"],Z={class:"group w-[150px] py-3 align-middle"},tt={class:"relative"},ot=["src","alt"],et={class:"bg-primary absolute left-0 top-0 rounded-br-2xl border border-solid border-red-400 px-2 text-base font-bold text-black"},st={class:"py-3 align-middle"},rt={class:"flex items-center justify-start pl-[150px] group-hover/table-line:font-bold"},nt={key:0,class:"me-2 inline-block rounded-md bg-red-600 p-1 text-sm text-white"},at={class:"relative py-3 align-middle"},lt={class:"flex items-center justify-center"},dt=["onMousedown"],it=["onMousedown"],ct={key:0,class:"absolute bottom-3 left-1/2 -translate-x-1/2"},pt=["onClick"],ut={class:"py-3 align-middle"},bt={class:"text-gray-500 line-through"},yt={class:"py-3 align-middle"},_t={__name:"table",props:{cartData:{type:Array,required:!0}},setup(g){const d=g,{deleteProductsIdArray:a}=x(m()),{updDelProdId:u}=m(),{updateProductQty:n}=m(),s=T(null),c=T(!1);function $(p,o){o.originQty||(o.originQty=o.qty),p==="+"&&o.qty?o.qty++:p==="-"&&o.qty>1&&o.qty--}function w(p,o){c.value=!0,$(p,o),s.value=setTimeout(()=>{c.value&&(s.value=R(()=>{$(p,o)},100))},800)}function f(){c.value=!1,clearTimeout(s.value),clearInterval(s.value)}function v(p){return p.originQty&&p.originQty!==p.qty}return(p,o)=>{const I=j;return l(),i("table",W,[o[7]||(o[7]=t("thead",{class:"align-middle"},[t("tr",{class:"border-primary border-b-2 border-solid text-xl font-bold"},[t("th",{scope:"col",class:"pb-2"},[t("i",{class:"bi bi-check2-square"})]),t("th",{scope:"col",class:"pb-2"},"圖片"),t("th",{scope:"col",class:"pb-2"},"名稱"),t("th",{scope:"col",class:"pb-2"},"數量"),t("th",{scope:"col",class:"pb-2"},"單價"),t("th",{scope:"col",class:"pb-2"},"小計")])],-1)),t("tbody",null,[(l(!0),i(B,null,Q(d.cartData,e=>(l(),i("tr",{class:C(["border-primary hover:bg-primary/10 group/table-line border-y border-solid text-xl",r(a).includes(e.id)&&"!bg-red-400/15"]),key:e.id},[t("td",X,[S(t("input",{type:"checkbox",class:"bg-primary focus:ring-primary/50 size-5 text-red-500 ring-4 checked:text-red-500 hover:text-red-500/90 focus:outline-none",value:e.id,"onUpdate:modelValue":o[0]||(o[0]=h=>V(a)?a.value=h:null),onChange:o[1]||(o[1]=h=>r(u)(r(a)))},null,40,Y),[[A,r(a)]])]),t("td",Z,[b(I,{to:`/productInfo/${e.product.id}`},{default:k(()=>[t("div",tt,[t("img",{src:e.product.imageUrl,class:"mx-auto block h-[100px] w-[150px] object-cover",alt:e.product.title},null,8,ot),t("span",et,y(e.product.category),1),o[2]||(o[2]=t("div",{class:"absolute inset-0 bg-black opacity-0 transition-opacity duration-300 group-hover:opacity-50"},null,-1)),o[3]||(o[3]=t("img",{class:"absolute left-1/2 top-1/2 h-[90px] -translate-x-1/2 -translate-y-1/2 object-contain opacity-0 group-hover:opacity-100",alt:"顯示產品細節",src:F},null,-1))])]),_:2},1032,["to"])]),t("td",st,[t("div",rt,[e.product.popular>2?(l(),i("span",nt," 熱門 ")):M("",!0),_(" "+y(e.product.title),1)])]),t("td",at,[t("div",lt,[t("div",null,[t("button",{type:"button",class:C(["hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",{"cursor-not-allowed bg-gray-600 text-black":e.qty<=1,"opacity-100":v(e)}]),onMousedown:h=>w("-",e),onMouseup:f,onMouseleave:f},o[4]||(o[4]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),42,dt)]),t("div",null,y(e.qty),1),t("div",null,[t("button",{type:"button",class:C(["hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",{"opacity-100":v(e)}]),onMousedown:h=>w("+",e),onMouseup:f,onMouseleave:f},o[5]||(o[5]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),42,it)])]),v(e)?(l(),i("div",ct,[t("button",{type:"button",class:"active:bg-primary/30 hover:bg-primary/25 bg-primary/20 text-primary p-1 text-sm",onClick:h=>r(n)(e)}," 確定修改 ",8,pt)])):M("",!0)]),t("td",ut,[t("span",bt,"$"+y(e.product.origin_price),1),_(" $"+y(e.product.price),1)]),t("td",yt," $"+y(((e==null?void 0:e.originQty)||(e==null?void 0:e.qty))*e.product.price),1),o[6]||(o[6]=t("td",{class:"py-3 align-middle"},null,-1))],2))),128))])])}}},mt={class:"flex items-center justify-end"},xt={class:"me-10 text-lg font-bold"},gt={__name:"total",setup(g){const{final_total:d}=x(m());return(a,u)=>{const n=j;return l(),i("div",mt,[t("p",xt,"總金額 $"+y(r(d))+" 元",1),b(n,{to:"/checkout",class:"bg-red-800 px-3 py-2 text-xl hover:bg-red-700/90 active:bg-red-600/80"},{default:k(()=>u[0]||(u[0]=[_("下一步")])),_:1})])}}},ft={class:"border-primary border border-b-0 border-solid p-5 text-lg"},vt={class:"font-bold text-red-600"},ht={class:"border-primary border border-t-0 border-solid p-5 pt-0 text-center"},kt={__name:"delModal",setup(g){const{isDeleteAll:d}=x(D()),{modalHide:a}=D(),{deleteProduct:u}=m();return(n,s)=>(l(),i("div",{class:"fixed -inset-20 z-[9999] flex items-center justify-center bg-black/50",onClick:s[3]||(s[3]=P((...c)=>r(a)&&r(a)(...c),["stop"]))},[t("div",{class:"bg-black",onClick:s[2]||(s[2]=P(()=>{},["stop"]))},[s[6]||(s[6]=t("header",{class:"border-primary border border-b-0 border-solid p-3"},[t("i",{class:"bi bi-exclamation-octagon-fill text-red-600"}),_(" 刪除 ")],-1)),t("main",ft,[s[4]||(s[4]=_(" 您確定要刪除 ")),t("span",vt,y(r(d)?"所有":"勾選")+"商品 ",1),s[5]||(s[5]=_(" 嗎？(此動作無法恢復) "))]),t("footer",ht,[t("button",{type:"button",class:"border-primary hover:bg-primary/20 active:bg-primary/25 me-3 inline-block border border-solid px-3 py-1",onClick:s[0]||(s[0]=(...c)=>r(a)&&r(a)(...c))}," 取消 "),t("button",{type:"button",class:"inline-block bg-red-600 px-3 py-[5.5px] text-white hover:bg-red-600/80 active:bg-red-600/85",onClick:s[1]||(s[1]=(...c)=>r(u)&&r(u)(...c))}," 刪除 ")])])]))}},$t={class:"text-center"},wt={__name:"cartEmpty",setup(g){const{category:d,search:a}=x(J());return(u,n)=>{const s=j;return l(),i("div",$t,[n[2]||(n[2]=t("h3",{class:"mb-5 text-2xl"},"購物車是空的",-1)),n[3]||(n[3]=t("p",{class:"mb-10"},"如果您在購物時發生問題，請聯絡我們。",-1)),t("div",null,[b(s,{to:"/contact",class:"border-primary hover:bg-primary/15 active:bg-primary/20 me-5 border border-solid px-3 py-2"},{default:k(()=>n[0]||(n[0]=[_("聯絡我們")])),_:1}),b(s,{to:`/products/${r(d)||"全部"}?search=${r(a)}`,class:"border-primary me-5 border border-solid bg-red-800 px-3 py-2 hover:bg-red-800/80 active:bg-red-800/90"},{default:k(()=>n[1]||(n[1]=[_("返回購物")])),_:1},8,["to"])])])}}},Ct={class:"pb-14 pt-10"},Mt={key:1,class:"mx-auto max-w-[1200px]"},Dt={__name:"carts",setup(g){const{cartData:d}=x(m()),{getCartData:a}=m(),{isDelModalShow:u}=x(D()),n=T(!1);return E(async()=>{await a(),n.value=!0}),(s,c)=>{const $=N,w=L,f=O,v=_t,p=gt,o=kt;return l(),i("main",Ct,[t("div",null,[b($,{title:"購物車"})]),r(n)?(l(),i("div",Mt,[r(d).length?(l(),i(B,{key:0},[b(G,{class:"mb-12"}),b(f),b(v,{cartData:r(d)},null,8,["cartData"]),b(p)],64)):(l(),q(wt,{key:1})),c[0]||(c[0]=t("h3",{class:"border-primary my-12 border-b border-solid pb-2 text-center text-[32px]"}," 猜你會喜歡... ",-1)),b(H),b(U,{name:"fade"},{default:k(()=>[r(u)?(l(),q(o,{key:0})):M("",!0)]),_:1})])):(l(),q(w,{key:0}))])}}},Vt=z(Dt,[["__scopeId","data-v-0c0a0372"]]);export{Vt as default};
