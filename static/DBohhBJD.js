import{_ as F}from"./DYs2Jnmw.js";import{L,H as V,s as R,r as u,C as I,A as q,o as c,c as i,a as m,v as A,M as B,u as s,n as C,y as M,t as P,m as O,_ as U,b as x,F as j,N as z}from"./DOkxriL9.js";import{a as E}from"./BpIcjdmt.js";import{u as b}from"./teGnrIEv.js";import{_ as H}from"./tY8b0otZ.js";import"./D8gQVhjj.js";const Q={class:"border-primary rounded-3xl border-2 border-solid px-16 py-10 text-center"},X={key:0,class:"text-left text-xl font-bold text-red-500"},G={__name:"form",emits:["showOrder"],setup(w,{emit:p}){const a=p,d=L(),_=V(),{orderId:o}=R(b()),{getOrderId:f,clearOrderData:n}=b(),t=u(null),g=u(null);let v=u(null);const T={default:"ring-gray-400 focus:ring-gray-400/50 ",error:"ring-red-500 focus:ring-red-500/50",success:"ring-green-500 focus:ring-green-500/50"},e=u(o.value),h=I(()=>{var r;return((r=e.value)==null?void 0:r.length)===20}),$=I(()=>h.value?"bg-red-800 hover:bg-red-800/90 active:bg-red-800/80":"bg-gray-400 hover:bg-gray-400/90 active:bg-gray-400/80 cursor-not-allowed");q(()=>{t.value&&t.value.focus(),d.query.orderId&&(e.value=d.query.orderId,k())});function S({element:r,animateName:l}){const y=E({element:r,animateName:l});typeof y=="function"&&y()}function N(){let r="default";e.value===""&&!v?r="default":e.value.length!==20?r="error":r="success",g.value=T[r]}function k(){if(v.value=!0,N(),!h.value){t.value&&t.value.focus(),S({element:t.value,animateName:"shakeX"});return}console.log("myOrderId.value: ",e.value),f(e.value),_.replace(`/order?orderId=${e.value}`),setTimeout(()=>{a("showOrder")},100)}function D(){e.value="",v.value=!1,n(),_.push("/order"),t.value.focus()}return(r,l)=>(c(),i("form",Q,[l[1]||(l[1]=m("h3",{class:"text-primary mb-8 text-xl"},"請輸入訂單編號 ( 20碼 )",-1)),A(m("input",{type:"text",class:C(["mb-4 w-full bg-gray-700/80 px-3 py-2 text-xl ring-1 focus:outline-none focus:ring-4",s(g)]),placeholder:"請輸入訂單編號 (20碼)","onUpdate:modelValue":l[0]||(l[0]=y=>M(e)?e.value=y:null),ref_key:"orderInputRef",ref:t},null,2),[[B,s(e),void 0,{trim:!0}]]),!s(h)&&s(v)!==null?(c(),i("p",X," *訂單編號 "+P(s(e).length<20?"不足":"超過")+" 20碼 ",1)):O("",!0),m("button",{type:"button",class:C(["text-primary mx-auto my-5 block w-full rounded-xl px-4 py-1 text-2xl",s($)]),onClick:k}," 送出 ",2),s(e)?(c(),i("button",{key:1,type:"button",class:"text-primary mx-auto my-5 block w-full rounded-xl bg-slate-400/50 px-4 py-1 text-2xl hover:bg-slate-400/55 active:bg-slate-400/60",onClick:D}," 清除 ")):O("",!0)]))}},J={class:"flex justify-center gap-8"},K={__name:"queryOrder",setup(w){const{getOrder:p}=b();R(b());const a=u(null),d=u(!1);async function _(){try{await p(),d.value=!0,await new Promise(o=>setTimeout(o,50)),z(()=>{var o,f,n,t;a.value&&((f=(o=a.value)==null?void 0:o.classList)==null||f.add("order-show-animation"),(t=(n=a.value)==null?void 0:n.classList)==null||t.remove("order-hide-animation","w-0","opacity-0"))})}catch(o){console.error(o)}}return(o,f)=>{const n=F,t=G,g=H;return c(),i(j,null,[x(n,{title:"查詢訂單"}),m("div",J,[m("section",null,[x(t,{onShowOrder:_})]),s(d)?(c(),i("section",{key:0,class:"w-0 opacity-0",ref_key:"orderRef",ref:a},[x(g)],512)):O("",!0)])],64)}}},W=U(K,[["__scopeId","data-v-7da9ec57"]]),Y={class:"pb-14 pt-10"},ae={__name:"order",setup(w){return(p,a)=>(c(),i("main",Y,[x(W)]))}};export{ae as default};
