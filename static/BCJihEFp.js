import{_ as q}from"./D6CgcnPw.js";import{o as s,c as r,d as w,a as t,t as c,m as k,n as h,r as f,F as I,q as D,u,s as C,v as j,x as T,b as x,w as B,_ as N,y as V,z as L,A as Q,B as U}from"./xenmD9g2.js";import{_ as z}from"./mZEGzokM.js";import{_ as A,u as $}from"./Cj8hL2_5.js";import{s as R}from"./BGaj6fSo.js";const S={key:0,type:"button",class:"border-primary relative border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40"},E={class:"bg-primary-500 absolute -right-7 -top-1 flex h-6 w-6 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full bg-red-500 text-base font-bold"},F={__name:"delBtns",props:{deleteProductsId:{type:Array,required:!0,default:[]}},setup(p){return(b,l)=>(s(),r("div",{class:h(["mb-6 flex items-center",p.deleteProductsId.length?"justify-between":"justify-end"])},[p.deleteProductsId.length?(s(),r("button",S,[l[0]||(l[0]=w(" 刪除 ")),t("span",E,c(p.deleteProductsId.length),1)])):k("",!0),l[1]||(l[1]=t("button",{type:"button",class:"border-primary border border-solid px-3 py-2 hover:bg-red-500/30 active:bg-red-500/40"}," 全部刪除 ",-1))],2))}},G={class:"w-full text-center"},H={class:"w-20 py-3 align-middle"},J=["value"],K={class:"group relative w-[200px] py-3 align-middle"},O=["src","alt"],W={class:"bg-primary absolute left-0 top-3 rounded-br-2xl border border-solid border-red-400 px-2 text-base font-bold text-black"},X={class:"py-3 align-middle"},Y={class:"flex items-center justify-center group-hover/table-line:font-bold"},Z={class:"relative py-3 align-middle"},tt={class:"flex items-center justify-center"},et=["onMousedown"],ot=["onMousedown"],st={key:0,class:"absolute bottom-3 left-1/2 -translate-x-1/2"},rt={class:"py-3 align-middle"},lt={class:"text-gray-500 line-through"},nt={class:"py-3 align-middle"},at={__name:"table",props:{cartData:{type:Array,required:!0}},emits:["updDelProdId"],setup(p,{emit:b}){const l=p,a=b,d=f([]),i=f(null),y=f(!1);function m(n,e){e.originQty||(e.originQty=e.qty),n==="+"&&e.qty?e.qty++:n==="-"&&e.qty>1&&e.qty--}function _(n,e){y.value=!0,m(n,e),i.value=setTimeout(()=>{y.value&&(i.value=R(()=>{m(n,e)},100))},800)}function g(){y.value=!1,clearTimeout(i.value),clearInterval(i.value)}function P(n){return n.originQty&&n.originQty!==n.qty}return(n,e)=>{const M=z;return s(),r("table",G,[e[9]||(e[9]=t("thead",{class:"align-middle"},[t("tr",{class:"border-primary border-b-2 border-solid text-xl font-bold"},[t("th",{scope:"col",class:"pb-2"},[t("i",{class:"bi bi-check2-square"})]),t("th",{scope:"col",class:"pb-2"},"圖片"),t("th",{scope:"col",class:"pb-2"},"產品名稱"),t("th",{scope:"col",class:"pb-2"},"數量"),t("th",{scope:"col",class:"pb-2"},"單價"),t("th",{scope:"col",class:"pb-2"},"小計")])],-1)),t("tbody",null,[(s(!0),r(I,null,D(l.cartData,o=>(s(),r("tr",{class:h(["border-primary hover:bg-primary/15 group/table-line border-y border-solid text-xl",u(d).includes(o.product.id)&&"bg-primary/10"]),key:o.id},[t("td",H,[C(t("input",{type:"checkbox",class:"bg-primary focus:ring-primary/50 size-5 text-red-500 ring-4 checked:text-red-500 hover:text-red-500/90 focus:outline-none",value:o.product.id,"onUpdate:modelValue":e[0]||(e[0]=v=>T(d)?d.value=v:null),onChange:e[1]||(e[1]=v=>a("updDelProdId",u(d)))},null,40,J),[[j,u(d)]])]),t("td",K,[x(M,{to:`/productInfo/${o.product.id}`},{default:B(()=>[t("img",{src:o.product.imageUrl,width:"200",height:"160",class:"mx-auto block object-cover",alt:o.product.title},null,8,O),t("span",W,c(o.product.category),1),e[2]||(e[2]=t("div",{class:"absolute inset-0 bg-black opacity-0 transition-opacity duration-300 group-hover:opacity-50"},null,-1)),e[3]||(e[3]=t("img",{class:"absolute left-1/2 top-1/2 h-[120px] -translate-x-1/2 -translate-y-1/2 object-contain opacity-0 group-hover:opacity-100",alt:"顯示產品細節",src:A},null,-1))]),_:2},1032,["to"])]),t("td",X,[t("div",Y,[e[4]||(e[4]=t("span",{class:"me-2 inline-block rounded-md bg-red-600 p-1 text-sm text-white"}," 熱門 ",-1)),w(" "+c(o.product.title),1)])]),t("td",Z,[t("div",tt,[t("div",null,[t("button",{type:"button",class:h(["hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",{"cursor-not-allowed bg-gray-600 text-black":o.product.qty<=1}]),onMousedown:v=>_("-",o),onMouseup:g,onMouseleave:g},e[5]||(e[5]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),42,et)]),t("div",null,c(o.qty),1),t("div",null,[t("button",{type:"button",class:"hover:bg-primary/20 active:bg-primary/25 mx-3 px-2 py-1 text-sm opacity-0 group-hover/table-line:opacity-100",onMousedown:v=>_("+",o),onMouseup:g,onMouseleave:g},e[6]||(e[6]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),40,ot)])]),P(o)?(s(),r("div",st,e[7]||(e[7]=[t("button",{type:"button",class:"active:bg-primary/30 hover:bg-primary/25 bg-primary/20 text-primary p-2"}," 確定修改 ",-1)]))):k("",!0)]),t("td",rt,[t("span",lt,"$"+c(o.product.origin_price),1),w(" $"+c(o.product.price),1)]),t("td",nt,"$"+c(o.final_total),1),e[8]||(e[8]=t("td",{class:"py-3 align-middle"},null,-1))],2))),128))])])}}},dt={class:"flex justify-between text-2xl"},it={key:0,class:"arrow-animation absolute right-0 inline-block text-[40px]"},ct={__name:"cartTimeLine",setup(p){const b=f(["確認商品","填寫資料","確認付款","完成訂單"]),l={cart:0,checkout:1,doubleCheck:2,completed:3},a=V(),d=L(()=>a!=null&&a.carts?l[a.carts]:0);return(i,y)=>(s(),r("header",null,[t("ul",dt,[(s(!0),r(I,null,D(u(b),(m,_)=>(s(),r("li",{key:`timeline-${m}`,class:"relative flex w-full items-center justify-center"},[t("span",{class:h(["border-primary rounded-br-3xl rounded-tl-3xl border border-solid px-3 py-2",u(d)===_&&"bg-primary text-black"])},c(m),3),_!==u(b).length-1?(s(),r("span",it,y[0]||(y[0]=[t("i",{class:"bi bi-arrow-right"},null,-1)]))):k("",!0)]))),128))])]))}},ut=N(ct,[["__scopeId","data-v-bd174bd8"]]),pt={class:"pb-14 pt-10"},bt={class:"mx-auto max-w-[1200px]"},ft={__name:"carts",setup(p){const{cartData:b}=Q($()),{getCartData:l}=$(),a=f([]);U(()=>{l()});function d(i){a.value=[...i]}return(i,y)=>{const m=q,_=F,g=at;return s(),r("main",pt,[t("div",null,[x(m,{title:"購物車"})]),t("div",bt,[x(ut,{class:"mb-12"}),x(_,{deleteProductsId:u(a)},null,8,["deleteProductsId"]),x(g,{cartData:u(b),onUpdDelProdId:d},null,8,["cartData"])])])}}};export{ft as default};
