import{_ as P}from"./Bzrt2rfd.js";import{_ as T}from"./y0cDiYnp.js";import{Q as B,r as _,o as c,c as m,a as e,u as s,t as x,m as R,F as C,q as V,n as $,d as w,v as q,M as N,y as S,z as L,s as M,L as U,H as j,C as z,A as F,b as g,B as A}from"./CsCRyp1z.js";import{u as E}from"./ChcSmFmS.js";import{s as H,_ as O}from"./DtZr7ubC.js";import{u as Q}from"./D2vZSWhm.js";import{u as D}from"./CAMyAKOa.js";import"./Dt-0W8ny.js";import"./CSpRQmtO.js";import"./DyjX8Jjy.js";import"./7rBQ37ww.js";const G={class:"grid grid-cols-2 gap-x-28"},J=["src","alt","title"],K={class:"px-10 py-8"},W={class:"mb-4 flex items-center"},X={class:"bg-primary text-md inline-block rounded-md px-3 text-lg font-bold text-black"},Y={key:0,class:"text-md ms-2 inline-block rounded-md bg-red-500 px-3 text-lg font-bold text-white"},Z={class:"mb-4 flex items-end"},tt={class:"mb-5"},et={class:"text-xl leading-normal"},ot={class:"mb-5 flex items-center"},st={class:"me-2 mt-1 text-lg text-gray-400 line-through"},lt={class:"ms-2 text-3xl font-black"},rt={class:"text-red-500"},nt={class:"mb-5 flex"},at={__name:"productInfo",props:{productInfoData:{type:Object,required:!0,default:()=>({})}},setup(y){const b=y,{productInfoData:n}=B(b),{addProductToCart:v}=E(),r=_(1),d=_(null),o=_(!1);function f(l){l==="+"&&r.value?r.value++:l==="-"&&r.value>1&&r.value--}function p(l){o.value=!0,f(l),d.value=setTimeout(()=>{o.value&&(d.value=H(()=>{f(l)},100))},800)}function i(){o.value=!1,clearTimeout(d.value),clearInterval(d.value)}async function u(l,t){await v({product:l,qty:t}),r.value=1}return(l,t)=>(c(),m("div",G,[e("div",null,[e("img",{src:s(n).imageUrl,class:"block h-full w-full object-cover",alt:`${s(n).title}`,title:`${s(n).title}-${s(n).description}`},null,8,J)]),e("div",null,[e("ul",K,[e("li",W,[t[4]||(t[4]=e("span",{class:"text-2xl font-bold"},"類別：",-1)),e("span",X,x(s(n).category),1),+s(n).popular==3?(c(),m("span",Y," 熱門商品 ")):R("",!0)]),e("li",Z,[t[5]||(t[5]=e("span",{class:"text-2xl font-bold"},"推薦程度：",-1)),e("div",null,[(c(),m(C,null,V(3,a=>e("i",{class:$(["bi bi-heart-fill ms-2 inline-block text-xl",a<=+s(n).popular&&"text-red-500"]),key:`productInfo-heart-${a}`},null,2)),64))])]),e("li",tt,[t[6]||(t[6]=e("span",{class:"text-2xl font-bold"},"產品描述：",-1)),e("p",et,x(s(n).description),1)]),e("li",ot,[e("p",st," 原價 "+x(s(n).origin_price)+" 元 ",1),e("p",lt,[e("span",rt,x(s(n).price),1),t[7]||(t[7]=w(" 元 "))])]),e("li",nt,[e("button",{type:"button",class:$(["hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",{"cursor-not-allowed bg-gray-600 text-black":s(r)<=1}]),onMousedown:t[0]||(t[0]=a=>p("-",l.item)),onMouseup:i,onMouseleave:i},t[8]||(t[8]=[e("i",{class:"bi bi-dash-lg"},null,-1)]),34),q(e("input",{type:"number",class:"border-primay w-full border border-solid bg-black text-center text-4xl focus:outline-none",min:"1",readonly:"","onUpdate:modelValue":t[1]||(t[1]=a=>S(r)?r.value=a:null)},null,512),[[N,s(r)]]),e("button",{type:"button",class:"hover:bg-primary/20 active:bg-primary/25 border-primay border border-solid px-2 py-1 text-4xl",onMousedown:t[2]||(t[2]=a=>p("+",l.item)),onMouseup:i,onMouseleave:i},t[9]||(t[9]=[e("i",{class:"bi bi-plus-lg"},null,-1)]),32)]),e("li",null,[e("button",{type:"button",class:"m-auto block w-full bg-red-800 py-3 text-2xl hover:bg-red-700/90 active:bg-red-600/80",onClick:t[3]||(t[3]=L(a=>u(s(n),s(r)),["stop"]))},t[10]||(t[10]=[e("i",{class:"bi bi-cart-check-fill"},null,-1),w(" 加入購物車 ")]))])])])]))}},it={class:"pb-14 pt-10"},ut={class:"mx-auto max-w-[1200px]"},It={__name:"index",setup(y){const{products:b,category:n,search:v}=M(Q()),{productInfoData:r}=M(D()),{fetchProductInfo:d}=D(),o=U(),f=j(),p=z(()=>{var i,u;return(i=o==null?void 0:o.params)!=null&&i.productId?b.value.length?b.value.filter(l=>{var t;return l.id===((t=o==null?void 0:o.params)==null?void 0:t.productId)})[0]:(d((u=o==null?void 0:o.params)==null?void 0:u.productId),r.value):[]});return F(()=>{var i,u,l,t,a;!((i=r.value)!=null&&i.id)&&!((u=o==null?void 0:o.params)!=null&&u.productId)?f.push(`/products/${n.value||"全部"}?search=${v.value}`):!((l=r.value)!=null&&l.id)&&((t=o==null?void 0:o.params)!=null&&t.productId)&&d((a=o==null?void 0:o.params)==null?void 0:a.productId)}),(i,u)=>{var a,I,k,h;const l=P,t=T;return c(),m("main",it,[e("section",ut,[(a=s(p))!=null&&a.id?(c(),m(C,{key:0},[e("div",null,[g(l,{title:((I=s(p))==null?void 0:I.title)||""},null,8,["title"])]),g(at,{productInfoData:s(p)},null,8,["productInfoData"]),u[0]||(u[0]=e("h3",{class:"border-primary my-12 border-b border-solid pb-2 text-center text-[32px]"}," 猜你會喜歡... ",-1)),g(O,{currentProductId:(h=(k=s(o))==null?void 0:k.params)==null?void 0:h.productId},null,8,["currentProductId"])],64)):(c(),A(t,{key:1}))])])}}};export{It as default};
